###########################################################
# Vincent Lefvre's configuration file for Mutt 1.5.14cvs #
###########################################################

# Requires the following patches:
#   * patch-1.5.14.tt+tamo.assumed+attach+lws.2,
#   * parent_match (version with < modifier),
#   * trash_folder.


set imap_authenticators="LOGIN"

ignore *
unignore from to cc delivered-to reply-to subject organization date
unignore user-agent x-label x-mailer x-url x-spam-status x-greylist

#auto_view text/html
alternative_order text/enriched text/plain text/html

attachments +A */.*

mime_lookup application/octet-stream

# Bindings

# Unbind break-thread, as # can be hit by mistake too easily,
# and there is no possible undo.
bind    index   \#      noop
bind    pager   \#      noop

bind    generic \CL     refresh
bind    generic :       enter-command
bind    generic ?       help
bind    generic <       top-page
bind    generic =       middle-page
bind    generic >       bottom-page
bind    generic ' '     next-page
bind    generic <pagedown>  next-page
bind    generic b       previous-page
bind    generic <pageup>    previous-page
bind    generic +       next-line
bind    generic -       previous-line
bind    generic [       half-up
bind    generic ]       half-down
bind    generic j       next-entry
bind    generic <down>      next-entry
bind    generic k       previous-entry
bind    generic <up>        previous-entry
bind    generic ^       first-entry
bind    generic <home>      first-entry
bind    generic $       last-entry
bind    generic <end>       last-entry
bind    generic \r      select-entry
bind    generic t       tag-entry
bind    generic \;      tag-prefix
bind    generic /       search
bind    generic \e/     search-reverse
bind    generic n       search-next
bind    generic N       search-opposite
bind    generic !       shell-escape
bind    generic x       exit
bind    generic \ew     what-key

bind    editor  <up>        history-up
bind    editor  <down>      history-down
bind    editor  <left>      backward-char
bind    editor  <right>     forward-char
bind    editor  <delete>    delete-char
#bind   editor  \CH     backspace
#bind   editor  \C?     delete-char

bind    index   $       last-entry
bind    index   \CS     sync-mailbox
bind    index   c       change-folder
bind    index   \ec     change-folder-readonly
bind    index   %       toggle-write
bind    index   L       limit
bind    index   \eL     show-limit
bind    index   o       sort-mailbox
bind    index   O       sort-reverse
bind    index   A       create-alias
bind    index   @       display-address
bind    index   \r      display-message
bind    index   h       display-toggle-weed
bind    index   v       view-attachments
bind    index   j       next-undeleted
bind    index   <down>      next-undeleted
bind    index   k       previous-undeleted
bind    index   <up>        previous-undeleted
bind    index   J       next-entry
bind    index   <right>     next-entry
bind    index   K       previous-entry
bind    index   <left>      previous-entry
bind    index   \e<down>    next-unread
bind    index   \e<up>      previous-unread
bind    index   \en     next-thread
bind    index   \ep     previous-thread
bind    index   \eN     next-subthread
bind    index   \eP     previous-subthread
bind    index   \t      next-new
bind    index   \e\t        previous-new
bind    index   -       current-middle
bind    index   p       print-message
bind    index   C       copy-message
bind    index   s       save-message
bind    index   |       pipe-message
bind    index   f       flag-message
bind    index   \CN     toggle-new
bind    index   d       delete-message
bind    index   u       undelete-message
bind    index   \ed     delete-thread
bind    index   \eu     undelete-thread
bind    index   \er     read-thread
bind    index   \et     tag-thread
bind    index   \eD     delete-subthread
bind    index   \eU     undelete-subthread
bind    index   \eR     read-subthread
bind    index   \eT     tag-subthread
bind    index   R       recall-message
bind    index   m       mail
bind    index   B       bounce-message
bind    index   F       forward-message
bind    index   r       reply
bind    index   g       group-reply
bind    index   l       list-reply
bind    index   \e}     search
bind    index   \e{     search-reverse
bind    index   T       tag-pattern
bind    index   \CT     untag-pattern
bind    index   D       delete-pattern
bind    index   U       undelete-pattern
bind    index   \eC     decode-copy
bind    index   \es     decode-save
bind    index   w       set-flag
bind    index   W       clear-flag
bind    index   Q       query
bind    index   V       show-version
bind    index   q       quit

macro   index   /       ":set simple_search='~f %s | ~s %s'\r\e}"
macro   index   \\      ":set simple_search='~b %s'\r\e}"
macro   index   \e/     ":set simple_search='~f %s | ~s %s'\r\e{"
macro   index   \e\\        ":set simple_search='~b %s'\r\e{"
macro   index   \ef     ":set index_format='%4C %Z %[%b %d] %-15.15F (%4l) %s'\r\CL"
macro   index   \el     ":set index_format='%4C %Z %[%b %d] %-15.15L (%4l) %s'\r\CL"
macro   index   \ey     ":set index_format='%4C %-12.12F %-12.12s %y'\r\CL"
macro   index   \CU     "\CT~A\r" "untag all"
macro   index   \CB     "|urlview\r"
macro   index   \e<left>    ":toggle narrow_tree\r"
macro   index   \e<right>   ":toggle ascii_chars\r\CL"
macro   index   a       ":set pipe_split=yes\CM|$HOME/scripts/addlabels " "add labels"
macro   index   y       "<limit>~y\"( |\\\\\\\`)( |\\\\\\\')\"<left><left><left><left><left><left><left><left><left>" "limit to some label"
macro   index   \CA     "<limit><kill-line>\CM" "limit to all"
macro   index   \eH     ":set pipe_split=yes\CM|sa-learn --ham --no-sync" "set message as ham (for sa-learn)"
macro   index   \eS     ":set pipe_split=yes\CM|sa-learn --spam --no-sync" "set message as spam (for sa-learn)"
macro   index   G       "!gm\r" "fetch mail"

bind    pager   :       enter-command
bind    pager   ?       help
bind    pager   A       create-alias
bind    pager   @       display-address
bind    pager   \CS     sync-mailbox
bind    pager   c       change-folder
bind    pager   \ec     change-folder-readonly
bind    pager   h       display-toggle-weed
bind    pager   \r      next-line
bind    pager   ^       top
bind    pager   <       top
bind    pager   <home>      top
bind    pager   $       bottom
bind    pager   >       bottom
bind    pager   <end>       bottom
bind    pager   ' '     next-page
bind    pager   <pagedown>  next-page
bind    pager   b       previous-page
bind    pager   <pageup>    previous-page
bind    pager   +       next-line
bind    pager   -       previous-line
bind    pager   [       half-up
bind    pager   ]       half-down
bind    pager   v       view-attachments
bind    pager   S       skip-quoted
bind    pager   T       toggle-quoted
bind    pager   p       print-message
bind    pager   C       copy-message
bind    pager   s       save-message
bind    pager   |       pipe-message
bind    pager   f       flag-message
bind    pager   t       tag-message
bind    pager   \CN     mark-as-new
bind    pager   d       delete-message
bind    pager   u       undelete-message
bind    pager   B       bounce-message
bind    pager   F       forward-message
bind    pager   r       reply
bind    pager   g       group-reply
bind    pager   l       list-reply
bind    pager   R       recall-message
bind    pager   m       mail
bind    pager   j       next-undeleted
bind    pager   <down>      next-undeleted
bind    pager   k       previous-undeleted
bind    pager   <up>        previous-undeleted
bind    pager   J       next-entry
bind    pager   <right>     next-entry
bind    pager   K       previous-entry
bind    pager   <left>      previous-entry
bind    index   \e<down>    next-unread
bind    index   \e<up>      previous-unread
bind    pager   \en     next-thread
bind    pager   \ep     previous-thread
bind    pager   \eN     next-subthread
bind    pager   \eP     previous-subthread
bind    pager   \t      next-new
bind    pager   \eC     decode-copy
bind    pager   \es     decode-save
bind    pager   /       search
bind    pager   \e/     search-reverse
bind    pager   n       search-next
bind    pager   N       search-opposite
bind    pager   \\      search-toggle
bind    pager   V       show-version
bind    pager   q       exit
bind    pager   Q       quit

macro   pager   \CB     "|urlview\r"
macro   pager   a       ":set pipe_split=yes\CM|$HOME/scripts/addlabels " "add labels"
macro   pager   \eH     ":set pipe_split=yes\CM|sa-learn --ham --no-sync" "set message as ham (for sa-learn)"
macro   pager   \eS     ":set pipe_split=yes\CM|sa-learn --spam --no-sync" "set message as spam (for sa-learn)"

macro   attach  \CU     "|uudecode"

bind    compose q       exit
bind    compose i       ispell
bind    compose s       send-message
bind    compose p       postpone-message
bind    compose |       pipe-entry
bind    compose e       edit-message
bind    compose f       edit-fcc
bind    compose h       edit-headers
bind    compose m       edit-mime
bind    compose B       edit-bcc
bind    compose C       edit-cc
bind    compose F       edit-from
bind    compose R       edit-reply-to
bind    compose S       edit-subject
bind    compose T       edit-to
bind    compose a       attach-file
bind    compose d       detach-file
bind    compose \CD     edit-description
bind    compose \CE     edit-encoding
bind    compose \CF     edit-file
bind    compose \CT     edit-type
bind    compose \CP     print-entry
bind    compose \r      view-attach
bind    compose H       display-toggle-weed
bind    compose P       pgp-menu


# Variables

# set arrow_cursor
# set askcc
set attribution="On %{%F %T %z}, %n wrote:"
set auto_tag
set copy=yes
set date_format='!%F %T %Z'
set delete=ask-yes
set edit_headers
set editor="vi -i NONE"
set envelope_from
set nofcc_attach
set nohelp
set hidden_host
set menu_scroll
set nometoo
set mime_forward=ask-no
set move=no
set pager_index_lines=6
set pager_stop
set postponed=~/Mail/postponed
set print_command='iconv -c -t iso-8859-1 | a2ps --encoding=iso1'
set quit=ask-no
set record=~/Mail/sent
set reply_regexp="^[Rr][Ee]:[ \t]+"
set reverse_alias
set sort=threads
set sort_aux=last-date
set status_format='-%r-Mutt: %f [Msg:%?M?%M/?%m%?n? New:%n?%?t? Tag:%t?%?p? Post:%p?%?b? Inc:%b?%?l? %l?]---(%s)-%>-(%P)-'
set strict_threads
set tilde
set tmpdir=/var/tmp
set use_8bitmime
set nowait_key
set nowrite_bcc



# Charset handling

# Try codeset first as "locale charmap" outputs "unknown keyword charmap"
# with a 0 exit status under Darwin 8.3.0.
set charset=`codeset 2> /dev/null || locale charmap`//TRANSLIT

# Variables for the compat patch.
set assumed_charset="us-ascii"

# Color video attributes

color attachment brightred  black
color error  brightyellow   black
color indicator  brightyellow  red
color markers    red        blue
color normal     white    black
color message    white    default
color quoted     cyan    black
color signature  green black
color status     brightyellow   magenta
color tilde      yellow     black
color tree       brightred  black

color index  white black   !~l
color index  brightgreen    black   ^~p~P
color index  brightmagenta  black   ~sannounce!~s^re:
color index  brightyellow   black   ~F
color index  brightyellow   red ~Cdebian-security-announce
color index  brightwhite    blue    ~l~P
color index  brightyellow   blue    ~l~F~P
color index  brightwhite    magenta ~Cao2006@vinc17.org
color index  brightyellow   magenta ~F~Cao2006@vinc17.org
color index  brightwhite    green   ~Cspaces@(loria\\|calfor.lip6).fr
color index  brightblue green   ~F~Cspaces@(loria\\|calfor.lip6).fr
color index  brightwhite    green   ~Cspaces-nancy@loria.fr
color index  brightblue green   ~F~Cspaces-nancy@loria.fr
color index  brightwhite    green   ~Cmpfr@loria.fr
color index  brightblue green   ~F~Cmpfr@loria.fr
color index  brightblue yellow  ~i@ay>!~P

color hdrdefault brightmagenta  black
color header     brightgreen   black   ^from:
color header     brightred    black    ^subject:
color header     brightgreen    black   ^(to|cc|delivered-to):
color header     brightcyan black   ^(x-mailer|user-agent):
color header     yellow     black   ^organization:
color header     brightblue yellow  ^x-label:

color body   brightyellow   black   (ftp|https?)://[-0-9A-Za-z_/.~:\#%@,+?&=]*[0-9A-Za-z_/\#%]
color body   brightyellow   black   [-0-9A-Za-z_%.+]+@[-0-9A-Za-z_.]*[A-Za-z]

folder-hook pluto color body brightyellow black ^].*


# Mono video attributes

mono  attachment bold
mono  status     reverse
mono quoted bold

mono  hdrdefault none
mono  header     bold           ^from:
mono  header     underline      ^subject:


# Folder-hooks

folder-hook . \
  "set index_format='%4C %Z %[%b %d] %-15.15F %?M?->%4M&(%4l)? %s'"

# Disable the following folder-hook for IMAP mailboxes, otherwise the "-"
# would be sent as the first character of the password (no workaround?).
folder-hook !^imaps?: "push -"

# Ignore the "old" flag with IMAP mailboxes.
# Commented out as bug 1262 has been fixed.
#folder-hook . "set mark_old"
#folder-hook ^imaps?: "unset mark_old"

# Open the oldarc and vfolder mailboxes in read-only mode.
folder-hook /(oldarc|vfolder)$ "set read_only"

# Trash mailbox
# folder-hook . "unset trash"
# No longer set trash folder on IMAP/Loria mailbox because virus/spam
# messages are saved into it too.
#folder-hook ^imaps?://vlefevre@imap\.loria\.fr/INBOX "set trash='=trash'"


# Message-hooks

message-hook . \
  "set quote_regexp='^(>[^F]|>F[^r]|>Fr[^o]|>Fro[^m]|[A-Za-z]+> )'"
message-hook ~fdavidtg-muttusers@justpickone\.org \
  "set quote_regexp='^%'"
message-hook ~fschaefer@brasslantern\.com \
  "set quote_regexp='^}'"
message-hook ~fsal@.*\.nasa\.gov \
  "set quote_regexp='^o[\n ]'"


# Send-hooks

send-hook . "my_hdr X-Mailer-Info: http://www.vinc17.org/mutt/"

# No 8bit to smartgroups mailing-lists to avoid sig separator breakage.
send-hook . "set allow_8bit=yes"
send-hook @smartgroups\.com "set allow_8bit=no"


# Message Scoring

folder-hook . "unset score"
folder-hook . "unscore *"
folder-hook ^imaps?://vlefevre@imap\.loria\.fr/INBOX "source ~/.mutt.score.il"


# $Id: muttrc 16333 2007-03-01 13:48:26Z lefevre $

